- feature: Required columns
  schema: >
    User(id)(name) {
      id: Number
      name: String
      required: Boolean
    }
  tests:
    - test: all columns defined is valid
      data:
        User:
          - id: 0
            name: bob
            required: True
    - test: allows missing column
      data:
        User:
          - id: 0
            name: bob
    - test: missing index columns
      data:
        User:
          - required: True
          - required: False
      errors:
        - err: MissingIndex
          col: [id, name]
    - test: missing partial index
      data:
        User:
          - id: 0
            required: True
      errors:
        - err: MissingIndex
          col: name
    - test: missing value in row
      data:
        User:
          - id: 0
            name: bob
            required: True
          - id: 1
            name: sally
      errors:
        - err: MissingValue
          col: required
          row: 1
- feature: Optional columns
  schema: >
    User(id) {
      id: Number
      optional?: Number
      many*: Number
    }
  tests:
    - test: allow null value
      data:
        User:
          - id: 1
          - id: 2
            optional: 0
          - id: 3
            many: 1
- feature: Multi-Value columns
  schema: >
    Post(id) {
      id: Number
      title: String
      authors+: String
      tags*: String
    }
  tests:
    - test: allow list values
      data:
        Post:
          - id: 1
            title: "Post 1"
            authors: 
              - ben
              - bob
            tags:
              - funny
              - great
    - test: allow single value lists
      data:
        Post:
          - id: 1
            title:
              - "Post 1"
            authors:
              - ben
            tags: 
              - funny
    - test: don't allow multi-value lists
      data: 
        Post:
          - id: 1
            title:
              - "Post 1"
              - "Misbehaving alternative title"
            authors:
              - ben
            tags:
              - funny
      errors:
        - err: MultipleValues
          col: title
    - test: allow mix of single or missing values
      data:
        Post:
          - id: 1
            title: "Post 1"
            authors: ben
          - id: 2
            title: "Post 2"
            authors:
              - ben
            tags: funny
          - id: 3
            title:
              - "Post 3"
            authors:
              - ben
              - bob
            tags:
              - funny
              - wishlist